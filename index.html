<!DOCTYPE html>
<html>
<head>
    <title>Dice Image</title>
    <style>canvas { border: 1px solid #333; }</style>
    <script src="pixelIt.js"></script>
</head>
<body>
    <div id="container"></div>

    <p><button id="act">Process</button>
<script>
window.addEventListener('DOMContentLoaded', function(evt) {
    var pIt = pixelIt('container').width(400).height(400).load('image.jpg');

    var button = document.getElementById('act');
    button.addEventListener('click', function(evt) {
        pIt.process(function(image) {
            image.patch(0, 0, image.width, image.height, function(r, g, b, a) {
                var gray = image.util.rgb2gray(r, g, b);
                return [gray, gray, gray, a - 100];
            });

            image.draw();
        });
    });

}, false);
</script>
</body>
</html>
